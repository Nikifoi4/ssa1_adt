# Контроль прав

## Типы прав

У всех файлов есть так называемые права доступа.

1. Право на чтение
2. Право на запись
3. Право на выполнение

Обозначаются они тремя буквами rwx. R от read, W от Write и X от eXecute.

Так же у файла есть владеющий им пользователь и группа.

Если мы введём команду `ls -l`, то увидим подробную информацию о файлах:

```
.rw-r--r-- nikifoi4 nikifoi4 600 B  Tue Jan  4 10:53:52 2022 1
drwxr-xr-x nikifoi4 nikifoi4 4.0 KB Tue Jan  4 04:47:44 2022 Arduino
```

Давайте разберём по порядку информацию о правах(первые 4 колонки)

Первая колонка - права доступа. Фактически она делится ещё на 4 колонки

```
d rwx rwx rwx
```

Первый символ - это тип файла. Типов файлов довольно много, но основных два. `.` - обозначает просто файл. `d` - директорию.

Вторая колонка показывает права пользователя пользователя, владеющего файлом.

Третья колонка показывает права пользователей состоящих в группе, владеющей файлом.

Четвёртая колонка показывает права всех остальных пользователей, не подходящих под первые два условия.

Во всех этих трёх колонках последовательно указано наличие каких либо прав. Если какого-то права нет, то вместо его буквы указывается символ `-`.

Далее идёт два столбца обозначающие владельцев файла

```
user group
```

User - пользователь владеющий файлом.

Group - группа владеющая файлом.

В случае с директориями право на выполнение позволяет пользователям проходить сквозь эту директорию. Т. е. если на какую-либо папку назначены права `rwx rwx --x` и вы не являетесь её владельцем, то вы сможете обратится к папке находящейся внутри, но не к её содержимому.

Так же стоит заметить что часто можно встретить цифровое обозначение прав.

Каждому праву соответствует значение

|   |   |
| - | - |
| R | 4 |
| W | 2 |
| X | 1 |

И, например, при указание прав на файл командой `chmod` мы можем указать права для пользователя, группы и остальных суммируя числа букв.

Допустим нам нужно что бы у пользователя был полный доступ(rwx), у группы не было доступа на изменение(r-x), а все остальные могли только читать(r--)

Для пользователя мы получим `4 + 2 + 1 = 7`

Для группы мы получим `4 + 0 + 1 = 5`

Для остальных получим `4 + 0 + 0 = 4`

## Контроль прав
Для управления правами на файл есть два основных инструмента:

### chmod

Команда `chmod` позволяет вам изменять права доступа.

Синтаксис довольно прост
```
chmod permissions files
```
Вместо `files` нужные вам файлы

Вместо `permissions` указываются требуемые права в одном из двух вариантов:
1. Цифровой( например 777 )
2. Буквенный

В буквенном формате у нас есть объект которому мы изменяем права и сами права.

Объекты обозначаются буквами `u` для владельца, `g` для владеющей группы и `o` для остальных

Так же права в формате `rwx`

Для того что бы задать права буквами мы указываем объект, что мы ему делаем( добавляем при помощи знака `+`, убираем при помощи знака `-` или приравниваем знаком `=`), а далее указываем какими правами мы будем это делать.

Например, команда
```
chmod u+rwx 1
```
Выдаст владельцу файла с именем `1` полные права.

### chown

`chown` меняет владельца и владеющую группу файла

Синтаксис простой
```
chown user:group file
```
Где `user` -  новый владелец файла, `group` - новая владеющая группа файла, `file` - сам файл.

## root

Как и в Windows в Linux есть пользователь администратор с абсолютными правами.

В Linux он называется `root`

В отличии от стандартных пользователей он не обращает внимания на систему прав и владельцев, а делает всё что ему вздумается.

## sudo

Иногда складывается такая ситуация, что нам нужно иметь временно иметь права администратора на своём пользователе для одного или нескольких действий.

В Linux для этого используется инструмент `sudo`

Изначально при установки системы мы добавляем в конфигурационный файл `/etc/sudoers` какое либо правило. Это может быть разрешение на конкретного пользователя или группу с различным разрешениями.

Далее если во время работы из под пользователя подпадающего под правила файла `/etc/sudoers` нужны права администратора мы пишем:
```
sudo apt update
```
> вместо `apt update` любая нужная вам команда

После ввода `sudo` попросит нас ввести пароль от нашего пользователя, после чего указанная нами команда выполнится с правами `root`

> Стоит отметить, что для текстовых редакторов лучше не использовать `sudo`, а использовать `EDITOR=nano sudoedit file`, т. к. команда `sudoedit` более безопасна, за счёт того что не даёт прямого доступа к редактируемому файлу, а создаёт его копию в директории `/tmp/` после чего копирует его содержимое файла из `/tmp/` в исходный файл.

## Задание
* Создать пользователя с именем `local_admin`
* Дать созданному пользователю права администратора.
